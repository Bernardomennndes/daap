#!/bin/bash

echo "ðŸ“š DAAP - Guia de Comandos RÃ¡pidos"
echo "=================================="
echo ""

echo "ðŸ” 1. VERIFICAÃ‡Ã•ES INICIAIS"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  ./check-requirements.sh    # Verificar prÃ©-requisitos do sistema"
echo "  ./validate-env.sh          # Validar configuraÃ§Ã£o .env"
echo "  ./setup-info.sh            # Ver resumo da configuraÃ§Ã£o"
echo ""

echo "ðŸš€ 2. DEPLOY E GERENCIAMENTO"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  ./deploy.sh                # Deploy com 3 instÃ¢ncias (padrÃ£o)"
echo "  ./deploy.sh 5              # Deploy com 5 instÃ¢ncias especÃ­ficas"
echo "  ./scale.sh 8               # Escalar para 8 instÃ¢ncias"
echo "  ./scale.sh 2               # Reduzir para 2 instÃ¢ncias"
echo ""

echo "ðŸ“Š 3. MONITORAMENTO"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  ./monitor.sh               # Status completo do sistema"
echo "  ./logs.sh                  # Logs de todos os serviÃ§os"
echo "  ./logs.sh reviews          # Logs apenas do reviews-service"
echo "  ./logs.sh cache            # Logs apenas do cache-service"
echo "  ./logs.sh traefik          # Logs do load balancer"
echo ""

echo "ðŸ§ª 4. TESTES"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  ./load-test.sh             # Teste bÃ¡sico (100 req, 10 concurrent)"
echo "  ./load-test.sh 500 20      # Teste intenso (500 req, 20 concurrent)"
echo "  curl http://reviews.localhost/health  # Testar health check"
echo ""

echo "ðŸ”§ 5. DOCKER COMPOSE"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  docker-compose up -d       # Iniciar serviÃ§os"
echo "  docker-compose down        # Parar serviÃ§os"
echo "  docker-compose ps          # Ver status dos containers"
echo "  docker-compose logs -f     # Ver logs em tempo real"
echo ""

echo "ðŸŒ 6. URLS IMPORTANTES"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  http://daap.localhost           # Interface web principal"
echo "  http://reviews.localhost        # API de reviews (load balanced)"
echo "  http://cache.localhost          # API de cache"
echo "  http://search.localhost         # API de busca"
echo "  http://localhost:8080           # Dashboard do Traefik"
echo ""

echo "ðŸ¥ 7. HEALTH CHECKS"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  curl http://reviews.localhost/health   # Status do reviews-service"
echo "  curl http://cache.localhost/health     # Status do cache-service"
echo "  curl http://search.localhost/health    # Status do search-service"
echo ""

echo "ðŸ”„ 8. COMANDOS DE DESENVOLVIMENTO"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  pnpm install               # Instalar dependÃªncias"
echo "  pnpm run dev               # Modo desenvolvimento"
echo "  pnpm run build             # Build dos projetos"
echo ""

echo "ðŸ“ 9. CONFIGURAÃ‡ÃƒO"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  cp .env.example .env       # Criar arquivo de configuraÃ§Ã£o"
echo "  nano .env                  # Editar configuraÃ§Ãµes"
echo "  sudo sh -c 'cat hosts-local.txt >> /etc/hosts'  # Configurar hosts"
echo ""

echo "ðŸ†˜ 10. TROUBLESHOOTING"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  docker system prune -f    # Limpar containers Ã³rfÃ£os"
echo "  docker-compose down -v    # Parar e remover volumes"
echo "  docker-compose build --no-cache  # Rebuild sem cache"
echo "  docker ps -a               # Ver todos os containers"
echo "  docker logs CONTAINER_NAME # Ver logs de container especÃ­fico"
echo ""

echo "ðŸ“š 11. DOCUMENTAÃ‡ÃƒO"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  cat README.md              # DocumentaÃ§Ã£o principal"
echo "  cat ENV_GUIDE.md           # Guia de variÃ¡veis de ambiente"
echo "  cat IMPLEMENTATION_SUMMARY.md  # Resumo da implementaÃ§Ã£o"
echo ""

echo "ðŸ’¡ DICAS IMPORTANTES:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  â€¢ Sempre execute ./validate-env.sh antes do deploy"
echo "  â€¢ Use ./monitor.sh para acompanhar o sistema"
echo "  â€¢ Em caso de problemas, verifique ./logs.sh"
echo "  â€¢ Para produÃ§Ã£o, altere as configuraÃ§Ãµes no .env"
echo "  â€¢ O Traefik dashboard mostra mÃ©tricas em tempo real"
echo ""

echo "ðŸŽ¯ WORKFLOW RECOMENDADO:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  1. ./check-requirements.sh"
echo "  2. ./validate-env.sh" 
echo "  3. sudo sh -c 'cat hosts-local.txt >> /etc/hosts'"
echo "  4. ./deploy.sh 3"
echo "  5. ./monitor.sh"
echo "  6. Acessar http://daap.localhost"
